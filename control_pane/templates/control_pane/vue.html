<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}{% endblock %}</title>
    {% load staticfiles %}
    <link rel="shortcut icon" type="image/png" href="{% static "favicon.ico" %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'css/custom.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'fancybox/jquery.fancybox-1.3.4.css' %}" type="text/css" media="screen">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
          integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">


</head>
<body>
{% load control_pane_extras %}
<div id="main-section" class="container-fluid">
    <div class="nav-side-menu">
        <div class="brand" style="margin-bottom: 5px;">
            <a href="/" style="color: white; text-decoration: unset"><img src="{% static 'images/control_pane/logo.jpg' %}" class="img-responsive"></a>
        </div>
        <i class="fa fa-bars fa-2x toggle-btn" data-toggle="collapse" data-target="#menu-content"></i>
        <div class="menu-list">
            <ul id="menu-content" class="menu-content collapse out copter-list">
                {% verbatim %}
                    <copter-list-item v-for="copter in copters" :key="'copter-list-item-' + copter.id" :copter_id="copter.id" :copter_name="copter.name"></copter-list-item>
                {% endverbatim %}
                <a class="btn btn-primary" style="width:100%;" onclick="ControlPane.deleteData();">Удалить данные</a>
                {% if COPTERS_MULTIPLE == False %}
                    <li data-toggle="collapse" data-target="#service" class="collapsed">
                        <a href="#"><i class="fa fa-globe fa-lg"></i> Службы </a>
                    </li>
                    <ul class="sub-menu collapse" id="service">
                        <li>Управление подвесом камеры</li>
                        <li>Видеотрансляции</li>
                        <!-- <li>New Service 3</li> -->
                    </ul>

                    <li data-toggle="collapse" data-target="#settings" class="collapsed">
                        <a href="#"><i class="fa fa-cogs fa-lg"></i> Параметры </a>
                    </li>
                    <ul class="sub-menu collapse" id="settings">
                        <li>Настройка 1</li>
                        <li>Настройка 2</li>
                        <!-- <li>New Service 3</li> -->
                    </ul>
                {% endif %}
                {% verbatim %}
                    <copter-menu v-for="copter in copters" :key="'copter-menu-' + copter.id" :copter="copter" :active_copter="active_copter"></copter-menu>
                {% endverbatim %}
            </ul>
        </div>
    </div>
    <div class="controll-pane">
        <div id="map" class="active">

        </div>
    </div>
    <copter-bottom-sidebar :copters="copters" :active_copter="active_copter"></copter-bottom-sidebar>
    {% verbatim %}
        <div>
            <routes-tab v-for="copter in copters" :key="'routes-tab-' + copter.id" :copter="copter" :active_copter="active_copter"></routes-tab>
        </div>
    {% endverbatim %}
    <div class="video-pane">
        {% for copter in COPTERS %}
            <div class="video-tab" data-copter-id="{{ copter.id }}">
                <div class="lightbox">
                    <img data-load="true" class="player_{{ copter.id }}" src="{{ copter.camera_color }}"
                         data-src="{{ copter.camera_color }}" style="width: 100%;"/>
                    </img>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
</div>
</div>
<script>
    window.WS_CONNECTION_STRING = "{{ WS_CONNECTION_STRING }}";
</script>

<!-- Яндекс карты -->
<script src="https://api-maps.yandex.ru/2.1.68/?lang=ru_RU" type="text/javascript"></script>
<!--/ Яндекс карты /-->
<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.css"/>
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.6/dist/jquery.fancybox.min.js"></script>
{#<script src="{% static 'js/vue.min.js' %}"></script>#}
<!-- версия для разработки, отображает полезные предупреждения в консоли -->
{#<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>#}
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script src="{% static 'js/control_pane/page_builder.js' %}"></script>
<script src="{% static 'js/control_pane/base.js' %}"></script>
<script src="{% static 'js/control_pane/copter.js' %}"></script>
<script src="{% static 'js/control_pane/ws_messages.js' %}"></script>
<script src="{% static 'js/control_pane/ws_listener.js' %}"></script>
<script src="{% static 'js/control_pane/JCControllPane.js' %}"></script>
<script src="{% static 'js/control_pane/map_control.js' %}"></script>
<script src="{% static 'js/control_pane/map_object_template.js' %}"></script>
<script src="{% static 'js/control_pane/map_drawing.js' %}"></script>

<script>
    window.JSParams = {{ js_params|safe }};
</script>
<script type="text/javascript">
    $(document).ready(function () {
        ymaps.ready(init);

        function init() {
            window.Ymap = new window.ymaps.Map('map', {
                // При инициализации карты обязательно нужно указать
                // её центр и коэффициент масштабирования.
                center: [53.539524, 49.265238],
                zoom: 13,
                controls: [],
                type: 'yandex#satellite'
            }, {
                searchControlProvider: 'yandex#search'
            });
        }

        window.ControlPane = new window.JCControllPane();
    });

</script>


<script type='text/javascript' src="{% static 'js/control_pane/vue_app.js' %}"></script>
</body>
</html>

